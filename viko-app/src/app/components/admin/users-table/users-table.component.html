<div class="grid grid-cols-2 gap-7 mx-10">

  <!-- Admins -->
  <div class="overflow-x-auto mt-6 ">
    <h3 class="text-xl font-semibold mb-3">Admins</h3>
    <div class="max-h-72 overflow-y-auto">
      <table class="w-full border-collapse table-auto text-center">
        <thead class="bg-gray-200 text-gray-700 sticky top-0 z-10">
          <tr class="border-b">
            <th class="px-4 py-2 cursor-pointer">Photo</th>
            <th class="px-4 py-2 cursor-pointer" (click)="sortAdmins('name')">Name</th>
            <th class="px-4 py-2 cursor-pointer" (click)="sortAdmins('username')">Username</th>
            <th class="px-4 py-2 cursor-pointer" (click)="sortAdmins('email')">Email</th>
            <th class="px-4 py-2 cursor-pointer">Actions</th>
          </tr>
        </thead>

        <tbody>
          @if (loading) {
            <tr>
              <td colspan="5" class="text-center py-4 text-gray-500">Loading...</td>
            </tr>
          }

          @if (admins.length === 0 && !loading) {
            <tr>
              <td colspan="5" class="text-center py-4 text-gray-500">No Admins found</td>
            </tr>
          } @else {
            @for (admin of admins; track $index) {
              <tr class="border-b hover:bg-gray-50 align-middle">
                <td class="px-4 py-2">
                  @if (admin.photo) {
                    <img [src]="admin.photo" alt="" class="w-10 h-10 rounded-full object-cover mx-auto">
                  } @else {
                    <div class="w-10 h-10 bg-gray-200 rounded-full mx-auto flex items-center justify-center text-gray-500 text-sm">
                      Photo
                    </div>
                  }
                </td>
                <td class="px-4 py-2">{{ admin.name }}</td>
                <td class="px-4 py-2">{{ admin.username }}</td>
                <td class="px-4 py-2">{{ admin.email }}</td>
                <td class="px-4 py-2">
                  <select class="rounded-full bg-indigo-200 text-blue-900 px-2 py-1" [ngModel]="admin.role"
                          (ngModelChange)="onRoleChange(admin, $event)">
                    @for (role of availableRoles; track role) {
                      <option [value]="role">{{ role }}</option>
                    }
                  </select>
                </td>
              </tr>
            }
          }
        </tbody>
      </table>
    </div>
  </div>

  <!-- Teachers -->
  <div class="overflow-x-auto mt-6 ">
    <h3 class="text-xl font-semibold mb-3">Teachers</h3>
    <div class="max-h-72 overflow-y-auto">
      <table class="w-full border-collapse table-auto text-center">
        <thead class="bg-gray-200 text-gray-700 sticky top-0 z-10">
          <tr class="border-b">
            <th class="px-4 py-2 cursor-pointer">Photo</th>
            <th class="px-4 py-2 cursor-pointer" (click)="sortTeachers('name')">Name</th>
            <th class="px-4 py-2 cursor-pointer" (click)="sortTeachers('username')">Username</th>
            <th class="px-4 py-2 cursor-pointer" (click)="sortTeachers('email')">Email</th>
            <th class="px-4 py-2 cursor-pointer">Actions</th>
          </tr>
        </thead>

        <tbody>
          @if (loading) {
            <tr>
              <td colspan="5" class="text-center py-4 text-gray-500">Loading...</td>
            </tr>
          }

          @if (teachers.length === 0 && !loading) {
            <tr>
              <td colspan="5" class="text-center py-4 text-gray-500">No Teachers found</td>
            </tr>
          } @else {
            @for (teacher of teachers; track $index) {
              <tr class="border-b hover:bg-gray-50 align-middle">
                <td class="px-4 py-2">
                  @if (teacher.photo) {
                    <img [src]="teacher.photo" alt="" class="w-10 h-10 rounded-full object-cover mx-auto">
                  } @else {
                    <div class="w-10 h-10 bg-gray-200 rounded-full mx-auto flex items-center justify-center text-gray-500 text-sm">
                      Photo
                    </div>
                  }
                </td>
                <td class="px-4 py-2">{{ teacher.name }}</td>
                <td class="px-4 py-2">{{ teacher.username }}</td>
                <td class="px-4 py-2">{{ teacher.email }}</td>
                <td class="px-4 py-2">
                  <select class="rounded-full bg-indigo-200 text-blue-900 px-2 py-1" [ngModel]="teacher.role"
                          (ngModelChange)="onRoleChange(teacher, $event)">
                    @for (role of availableRoles; track role) {
                      <option [value]="role">{{ role }}</option>
                    }
                  </select>
                </td>
              </tr>
            }
          }
        </tbody>
      </table>
    </div>
  </div>

</div>

<div class="overflow-x-auto mx-10 mt-6">
  <h3 class="text-xl font-semibold mb-3">Students</h3>

  <div class="max-h-80 overflow-y-auto">
    <table class="w-full border-collapse table-auto text-center">
      <thead class="bg-gray-200 text-gray-700 sticky top-0 z-10">
        <tr class="border-b">
          <th class="px-4 py-2 cursor-pointer">Photo</th>
          <th class="px-4 py-2 cursor-pointer" (click)="sortStudents('name')">Name</th>
          <th class="px-4 py-2 cursor-pointer" (click)="sortStudents('username')">Username</th>
          <th class="px-4 py-2 cursor-pointer" (click)="sortStudents('email')">Email</th>
          <th class="px-4 py-2 cursor-pointer">Actions</th>
        </tr>
      </thead>

      <tbody>
        @if (loading) {
          <tr>
            <td colspan="5" class="text-center py-4 text-gray-500">Loading...</td>
          </tr>
        }

        @if (students.length === 0 && !loading) {
          <tr>
            <td colspan="5" class="text-center py-4 text-gray-500">No Students found</td>
          </tr>
        } @else {
          @for (student of students; track $index) {
            <tr class="border-b hover:bg-gray-50 align-middle">
              <td class="px-4 py-2">
                @if (student.photo) {
                  <img [src]="student.photo" alt="" class="w-10 h-10 rounded-full object-cover mx-auto">
                } @else {
                  <div class="w-10 h-10 bg-gray-200 rounded-full mx-auto flex items-center justify-center text-gray-500 text-sm">
                    Photo
                  </div>
                }
              </td>
              <td class="px-4 py-2">{{ student.name }}</td>
              <td class="px-4 py-2">{{ student.username }}</td>
              <td class="px-4 py-2">{{ student.email }}</td>
              <td class="px-4 py-2">
                <select class="rounded-full bg-indigo-200 text-blue-900 px-2 py-1" [ngModel]="student.role"
                        (ngModelChange)="onRoleChange(student, $event)">
                  @for (role of availableRoles; track role) {
                    <option [value]="role">{{ role }}</option>
                  }
                </select>
              </td>
            </tr>
          }
        }
      </tbody>
    </table>
  </div>
</div>
